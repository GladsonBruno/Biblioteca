<!DOCTYPE html>
<html>
<head>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8">
    <link rel="stylesheet" type="text/css" href="Content/bootstrap.min.css" />
    <script src="/scripts/jquery.min.js"></script>
    <title></title>
</head>
<body>
    <div class="container">
        <div class="jumbotron">Teste</div>

        <!--
    <table>
        <thead>
            <th>ISBN</th>
            <th>Titulo</th>
            <th>Autores</th>
            <th>Editora</th>
            <th>Data Publicação</th>
            <th>Preço</th>
            <th>Critica Leitores</th>
        </thead>
        <tbody class="tblLivros">

        </tbody>

    </table>
    -->
        <div class="content"></div>
    </div>

    <script>

        var requisicao = new XMLHttpRequest();
        requisicao.open("GET", "http://localhost:55219/livro", true);
        requisicao.onload = function () {
            var resposta = JSON.parse(this.responseText);

            var elementos = "";
            var elementoAtual;
            for (var item in resposta) {
                elementoAtual = resposta[item];
                /*
                elementos += "<tr><td>" + resposta[item].ISBN + "</td><td>" + resposta[item].Titulo + "</td><td>" + resposta[item].Autores + "</td><td>" + resposta[item].Editora + "</td><td>" + resposta[item].Data_Publicacao + "</td><td>" + resposta[item].Preco_Extenso + "</td><td>";
                for (var comentario in elementoAtual.Critica_de_Leitores) {
                    elementos += "<td>" + elementoAtual.Critica_de_Leitores[comentario].Comentario + "</td>";
                }
                */
                elementos += "<div class='col-md-3 col-sm-4 col-6' style='float: left'>";
                elementos += "<div class='card' style= 'width:200px' >";
                elementos += "<img class='card-img-top' src='" + resposta[item].Image + "' alt='Card image'>";
                elementos += "<div class='card-body col-md-12'>";
                elementos += "<h4 class='card-title'>" + resposta[item].Titulo + "</h4>";
                elementos += "<p class='card-text'>" + resposta[item].Autores + "</p>";
                elementos += "<button class='btn btn-primary' onclick='pegarLivro(" + JSON.stringify(elementoAtual) + ")' > Ver Livro</button> ";
                elementos += "</div>";
                elementos += "</div>";
                elementos += "</div>";
                
                //elementos += "<img src=" + resposta[item].Image + "/><br/>"
            }

            //$(".tblLivros").append(elementos);
            $(".content").append(elementos);
        }
        requisicao.send();


        function pegarLivro(livro) {
            localStorage.setItem("Livro", JSON.stringify(livro));
        }
    </script>

</body>
</html>